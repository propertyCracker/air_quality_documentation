--- 
title: "Devices & Regions" 
--- 
Each simulated device is mapped to a region using devices.json and regions.json, defining latitude/longitude, base readings, and activity end hour. 
```json 
{ 
  "device_1": { 
    "region_name": "Cairo", 
    "lat": 30.0444, 
    "lon": 31.2357, 
    "temperature": 28.0, 
    "humidity": 50.0, 
    "co2": 400, 
    "no2": 20, 
    "pm25": 15, 
    "pm10": 25, 
    "activity_end": 22 
  } 
} 
``` 
## LOGS creation
logs are generated by the form **yyyy-mm-dd** 
logs are created in the local device and sent to iot hub

```python
def log_payload(payload):
    """Append one payload JSON to daily log file (Logs/YYYY-MM-DD.jsonl)."""
    if LOG_MODE:
        try:
            date_str = datetime.now().strftime("%Y-%m-%d")
            log_file = os.path.join(LOG_DIR, f"{date_str}.jsonl")
            with open(log_file, "a", encoding="utf-8") as f:
                f.write(json.dumps(payload, ensure_ascii=False) + "\n")
        except Exception as e:
            print(f"[LOG] Failed to write payload: {e}")
```
---
## connection with the IoT
to connect with each region we should get the device id and the connection string with Azure

```python
[
  {
    "deviceId": "CairoDevice",
    "connectionString": "YOUR_AZURE_IOT_CONNECTION_STRING_HERE"
  },
  {
    "deviceId": "DeltaDevice",
    "connectionString": "YOUR_AZURE_IOT_CONNECTION_STRING_HERE"
  },
  {
    "deviceId": "RedSeaDevice",
    "connectionString": "YOUR_AZURE_IOT_CONNECTION_STRING_HERE"
  },
  {
    "deviceId": "CanalCitiesDevice",
    "connectionString": "YOUR_AZURE_IOT_CONNECTION_STRING_HERE"
  },
  {
    "deviceId": "NorthCoastDevice",
    "connectionString": "YOUR_AZURE_IOT_CONNECTION_STRING_HERE"
  },
  {
    "deviceId": "UpperEgyptDevice",
    "connectionString": "YOUR_AZURE_IOT_CONNECTION_STRING_HERE"
  },
  {
    "deviceId": "NewValleyDevice",
    "connectionString": "YOUR_AZURE_IOT_CONNECTION_STRING_HERE"
  },
  {
    "deviceId": "SinaiDevice",
    "connectionString": "YOUR_AZURE_IOT_CONNECTION_STRING_HERE"
  }
]
```